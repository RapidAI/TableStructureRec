<div align="center">
  <div align="center">
    <h1><b>ğŸ“Š è¡¨æ ¼ç»“æ„è¯†åˆ«</b></h1>
  </div>
  <a href=""><img src="https://img.shields.io/badge/Python->=3.6,<3.12-aff.svg"></a>
  <a href=""><img src="https://img.shields.io/badge/OS-Linux%2C%20Mac%2C%20Win-pink.svg"></a>
<a href="https://pypi.org/project/lineless-table-rec/"><img alt="PyPI" src="https://img.shields.io/pypi/v/lineless-table-rec"></a>
<a href="https://pepy.tech/project/lineless-table-rec"><img src="https://static.pepy.tech/personalized-badge/lineless-table-rec?period=total&units=abbreviation&left_color=grey&right_color=blue&left_text=Downloads%20Lineless"></a>
<a href="https://pepy.tech/project/wired-table-rec"><img src="https://static.pepy.tech/personalized-badge/wired-table-rec?period=total&units=abbreviation&left_color=grey&right_color=blue&left_text=Downloads%20Wired"></a>
  <a href="https://semver.org/"><img alt="SemVer2.0" src="https://img.shields.io/badge/SemVer-2.0-brightgreen"></a>
  <a href="https://github.com/psf/black"><img src="https://img.shields.io/badge/code%20style-black-000000.svg"></a>
  <a href="https://github.com/RapidAI/TableStructureRec/blob/c41bbd23898cb27a957ed962b0ffee3c74dfeff1/LICENSE"><img alt="GitHub" src="https://img.shields.io/badge/license-Apache 2.0-blue"></a>
</div>

### æœ€è¿‘æ›´æ–°
- **2024.9.30**
  - ä¼˜åŒ–è¡¨æ ¼ç±»å‹åˆ¤æ–­ï¼Œå¢åŠ åœ¨çº¿æ¼”ç¤º
- **2024.10.13**
  - è¡¥å……æœ€æ–°paddlex-SLANet-plus æµ‹è¯„ç»“æœ(å·²é›†æˆæ¨¡å‹åˆ°rappid_tableä»“åº“)
- **2024.10.17**
  - è¡¥å……æœ€æ–°surya è¡¨æ ¼è¯†åˆ«æµ‹è¯„ç»“æœ  
### ç®€ä»‹
ğŸ’–è¯¥ä»“åº“æ˜¯ç”¨æ¥å¯¹æ–‡æ¡£ä¸­è¡¨æ ¼åšç»“æ„åŒ–è¯†åˆ«çš„æ¨ç†åº“ï¼ŒåŒ…æ‹¬æ¥è‡ªpaddleçš„è¡¨æ ¼è¯†åˆ«æ¨¡å‹ï¼Œ
é˜¿é‡Œè¯»å…‰æœ‰çº¿å’Œæ— çº¿è¡¨æ ¼è¯†åˆ«æ¨¡å‹ï¼Œllaipython(å¾®ä¿¡)è´¡çŒ®çš„æœ‰çº¿è¡¨æ ¼æ¨¡å‹ï¼Œç½‘æ˜“Qanythingå†…ç½®è¡¨æ ¼åˆ†ç±»æ¨¡å‹ç­‰ã€‚

#### ç‰¹ç‚¹

âš¡  **å¿«**  é‡‡ç”¨ONNXRuntimeä½œä¸ºæ¨ç†å¼•æ“ï¼Œcpuä¸‹å•å›¾æ¨ç†1-7s

ğŸ¯ **å‡†**: ç»“åˆè¡¨æ ¼ç±»å‹åˆ†ç±»æ¨¡å‹ï¼ŒåŒºåˆ†æœ‰çº¿è¡¨æ ¼ï¼Œæ— çº¿è¡¨æ ¼ï¼Œä»»åŠ¡æ›´ç»†åˆ†ï¼Œç²¾åº¦æ›´é«˜

ğŸ›¡ï¸ **ç¨³**: ä¸ä¾èµ–ä»»ä½•ç¬¬ä¸‰æ–¹è®­ç»ƒæ¡†æ¶ï¼Œåªä¾èµ–å¿…è¦åŸºç¡€åº“ï¼Œé¿å…åŒ…å†²çª

### åœ¨çº¿æ¼”ç¤º
[modelscopeé­”å¡”](https://www.modelscope.cn/studios/jockerK/TableRec)
[huggingface](https://huggingface.co/spaces/Joker1212/TableDetAndRec)
### æ•ˆæœå±•ç¤º

<div align="center">
    <img src="https://github.com/RapidAI/TableStructureRec/releases/download/v0.0.0/demo_img_output.gif" alt="Demo" width="100%" height="100%">
</div>

### æŒ‡æ ‡ç»“æœ

[TableRecognitionMetric è¯„æµ‹å·¥å…·](https://github.com/SWHL/TableRecognitionMetric) [huggingfaceæ•°æ®é›†](https://huggingface.co/datasets/SWHL/table_rec_test_dataset) [modelscope æ•°æ®é›†](https://www.modelscope.cn/datasets/jockerK/TEDS_TEST/files) [Rapid OCR](https://github.com/RapidAI/RapidOCR)

æµ‹è¯•ç¯å¢ƒ: ubuntu 20.04 python 3.10.10 opencv-python 4.10.0.84 

æ³¨:
   StructEqTable è¾“å‡ºä¸º latexï¼Œåªå–æˆåŠŸè½¬æ¢ä¸ºhtmlå¹¶å»é™¤æ ·å¼æ ‡ç­¾åè¿›è¡Œæµ‹è¯„

   Surya-Tabled ä½¿ç”¨å†…ç½®ocræ¨¡å—ï¼Œè¡¨æ ¼æ¨¡å‹ä¸ºè¡Œåˆ—è¯†åˆ«æ¨¡å‹ï¼Œæ— æ³•è¯†åˆ«å•å…ƒæ ¼åˆå¹¶ï¼Œå¯¼è‡´åˆ†æ•°è¾ƒä½

| æ–¹æ³•                                                                                              |    TEDS     | TEDS-only-structure |
|:------------------------------------------------------------------------------------------------|:-----------:|:-------------------:|
| [surya-tabled(--skip-detect)](https://github.com/VikParuchuri/tabled)                           |   0.33437   |       0.65865       |
| [surya-tabled](https://github.com/VikParuchuri/tabled)                                          |   0.33940   |       0.67103       |
| [deepdoctection(rag-flow)](https://github.com/deepdoctection/deepdoctection?tab=readme-ov-file) |   0.59975   |       0.69918       |
| [ppstructure_table_master](https://github.com/PaddlePaddle/PaddleOCR/tree/main/ppstructure)     |   0.61606   |       0.73892       |
| [ppsturcture_table_engine](https://github.com/PaddlePaddle/PaddleOCR/tree/main/ppstructure)     |   0.67924   |       0.78653       |
| table_cls + wired_table_rec v1 + lineless_table_rec                                             |   0.68507   |       0.75140       |
| [StructEqTable](https://github.com/UniModal4Reasoning/StructEqTable-Deploy)                     |   0.67310   |       0.81210       |
| [RapidTable(SLANet)](https://github.com/RapidAI/RapidTable)                                     |   0.71654   |       0.81067       |
| table_cls + wired_table_rec v2 + lineless_table_rec                                             |   0.73702   |       0.80210       |
| [RapidTable(SLANet-plus)](https://github.com/RapidAI/RapidTable)                                | **0.84481** |     **0.91369**     |

### ä½¿ç”¨å»ºè®®
wired_table_rec_v2(æœ‰çº¿è¡¨æ ¼ç²¾åº¦æœ€é«˜): é€šç”¨åœºæ™¯æœ‰çº¿è¡¨æ ¼(è®ºæ–‡ï¼Œæ‚å¿—ï¼ŒæœŸåˆŠ, æ”¶æ®ï¼Œå•æ®ï¼Œè´¦å•)

paddlex-SLANet-plus(ç»¼åˆç²¾åº¦æœ€é«˜): æ–‡æ¡£åœºæ™¯è¡¨æ ¼(è®ºæ–‡ï¼Œæ‚å¿—ï¼ŒæœŸåˆŠä¸­çš„è¡¨æ ¼)

### å®‰è£…

``` python {linenos=table}
pip install wired_table_rec lineless_table_rec table_cls
```

### å¿«é€Ÿä½¿ç”¨

``` python {linenos=table}
import os

from lineless_table_rec import LinelessTableRecognition
from lineless_table_rec.utils_table_recover import format_html, plot_rec_box_with_logic_info, plot_rec_box
from table_cls import TableCls
from wired_table_rec import WiredTableRecognition

lineless_engine = LinelessTableRecognition()
wired_engine = WiredTableRecognition()
table_cls = TableCls()
img_path = f'images/img14.jpg'

cls,elasp = table_cls(img_path)
if cls == 'wired':
    table_engine = wired_engine
else:
    table_engine = lineless_engine
  
html, elasp, polygons, logic_points, ocr_res = table_engine(img_path)
print(f"elasp: {elasp}")

# ä½¿ç”¨å…¶ä»–ocræ¨¡å‹
#ocr_engine =RapidOCR(det_model_dir="xxx/det_server_infer.onnx",rec_model_dir="xxx/rec_server_infer.onnx")
#ocr_res, _ = ocr_engine(img_path)
#html, elasp, polygons, logic_points, ocr_res = table_engine(img_path, ocr_result=ocr_res)  

# output_dir = f'outputs'
# complete_html = format_html(html)
# os.makedirs(os.path.dirname(f"{output_dir}/table.html"), exist_ok=True)
# with open(f"{output_dir}/table.html", "w", encoding="utf-8") as file:
#     file.write(complete_html)
# # å¯è§†åŒ–è¡¨æ ¼è¯†åˆ«æ¡† + é€»è¾‘è¡Œåˆ—ä¿¡æ¯
# plot_rec_box_with_logic_info(
#     img_path, f"{output_dir}/table_rec_box.jpg", logic_points, polygons
# )
# # å¯è§†åŒ– ocr è¯†åˆ«æ¡†
# plot_rec_box(img_path, f"{output_dir}/ocr_box.jpg", ocr_res)
```

#### åç§»ä¿®æ­£

```python
import cv2

img_path = f'tests/test_files/wired/squeeze_error.jpeg'
from wired_table_rec.utils import ImageOrientationCorrector

img_orientation_corrector = ImageOrientationCorrector()
img = cv2.imread(img_path)
img = img_orientation_corrector(img)
cv2.imwrite(f'img_rotated.jpg', img)
```

## FAQ (Frequently Asked Questions)

1. **é—®ï¼šåç§»çš„å›¾ç‰‡èƒ½å¤Ÿå¤„ç†å—ï¼Ÿ**
    - ç­”ï¼šè¯¥é¡¹ç›®æš‚æ—¶ä¸æ”¯æŒåç§»å›¾ç‰‡è¯†åˆ«ï¼Œè¯·å…ˆä¿®æ­£å›¾ç‰‡ï¼Œä¹Ÿæ¬¢è¿æpræ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

2. **é—®ï¼šè¯†åˆ«æ¡†ä¸¢å¤±äº†å†…éƒ¨æ–‡å­—ä¿¡æ¯**
   - ç­”ï¼šé»˜è®¤ä½¿ç”¨çš„rapidocrå°æ¨¡å‹ï¼Œå¦‚æœéœ€è¦æ›´é«˜ç²¾åº¦çš„æ•ˆæœï¼Œå¯ä»¥ä» [æ¨¡å‹åˆ—è¡¨](https://rapidai.github.io/RapidOCRDocs/model_list/#_1)
   ä¸‹è½½æ›´é«˜ç²¾åº¦çš„ocræ¨¡å‹,åœ¨æ‰§è¡Œæ—¶ä¼ å…¥ocr_resultå³å¯

3. **é—®ï¼šæ¨¡å‹æ”¯æŒ gpu åŠ é€Ÿå—ï¼Ÿ**
    - ç­”ï¼šç›®å‰è¡¨æ ¼æ¨¡å‹çš„æ¨ç†éå¸¸å¿«ï¼Œæœ‰çº¿è¡¨æ ¼åœ¨100msçº§åˆ«ï¼Œæ— çº¿è¡¨æ ¼åœ¨500msçº§åˆ«ï¼Œ
      ä¸»è¦è€—æ—¶åœ¨ocré˜¶æ®µï¼Œå¯ä»¥å‚è€ƒ [rapidocr_paddle](https://rapidai.github.io/RapidOCRDocs/install_usage/rapidocr_paddle/usage/#_3)
      åŠ é€Ÿocrè¯†åˆ«è¿‡ç¨‹

### TODO List

- [x] å›¾ç‰‡å°è§’åº¦åç§»ä¿®æ­£æ–¹æ³•è¡¥å……
- [x] å¢åŠ æ•°æ®é›†æ•°é‡ï¼Œå¢åŠ æ›´å¤šè¯„æµ‹å¯¹æ¯”
- [ ] è¡¥å……å¤æ‚åœºæ™¯è¡¨æ ¼æ£€æµ‹å’Œæå–ï¼Œè§£å†³æ—‹è½¬å’Œé€è§†å¯¼è‡´çš„ä½è¯†åˆ«ç‡
- [ ] ä¼˜åŒ–æ— çº¿è¡¨æ ¼æ¨¡å‹

### å¤„ç†æµç¨‹

```mermaid
flowchart TD
    A[/è¡¨æ ¼å›¾ç‰‡/] --> B([è¡¨æ ¼åˆ†ç±» table_cls])
    B --> C([æœ‰çº¿è¡¨æ ¼è¯†åˆ« wired_table_rec]) & D([æ— çº¿è¡¨æ ¼è¯†åˆ« lineless_table_rec]) --> E([æ–‡å­—è¯†åˆ« rapidocr_onnxruntime])
    E --> F[/htmlç»“æ„åŒ–è¾“å‡º/]
```

### è‡´è°¢

[PaddleX è¡¨æ ¼è¯†åˆ«](https://github.com/PaddlePaddle/PaddleX/blob/release/3.0-beta1/docs/module_usage/tutorials/ocr_modules/table_structure_recognition.md)

[PaddleOCR è¡¨æ ¼è¯†åˆ«](https://github.com/PaddlePaddle/PaddleOCR/blob/4b17511491adcfd0f3e2970895d06814d1ce56cc/ppstructure/table/README_ch.md)

[è¯»å…‰-è¡¨æ ¼ç»“æ„è¯†åˆ«-æœ‰çº¿è¡¨æ ¼](https://www.modelscope.cn/models/damo/cv_dla34_table-structure-recognition_cycle-centernet/summary)

[è¯»å…‰-è¡¨æ ¼ç»“æ„è¯†åˆ«-æ— çº¿è¡¨æ ¼](https://www.modelscope.cn/models/damo/cv_resnet-transformer_table-structure-recognition_lore/summary)

[Qanything-RAG](https://github.com/netease-youdao/QAnything)

éå¸¸æ„Ÿè°¢ llaipython(å¾®ä¿¡ï¼Œæä¾›å…¨å¥—æœ‰å¿é«˜ç²¾åº¦è¡¨æ ¼æå–) æä¾›é«˜ç²¾åº¦æœ‰çº¿è¡¨æ ¼æ¨¡å‹ã€‚

éå¸¸æ„Ÿè°¢ [MajexH](https://github.com/MajexH)å®Œæˆdeepdoctection(rag-flow)çš„è¡¨æ ¼è¯†åˆ«æµ‹è¯•

### è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤è¯·æ±‚ã€‚å¯¹äºé‡å¤§æ›´æ”¹ï¼Œè¯·å…ˆæ‰“å¼€issueè®¨è®ºæ‚¨æƒ³è¦æ”¹å˜çš„å†…å®¹ã€‚

è¯·ç¡®ä¿é€‚å½“æ›´æ–°æµ‹è¯•ã€‚

### [èµåŠ©](https://rapidai.github.io/Knowledge-QA-LLM/docs/sponsor/)

å¦‚æœæ‚¨æƒ³è¦èµåŠ©è¯¥é¡¹ç›®ï¼Œå¯ç›´æ¥ç‚¹å‡»å½“å‰é¡µæœ€ä¸Šé¢çš„SponsoræŒ‰é’®ï¼Œè¯·å†™å¥½å¤‡æ³¨(**æ‚¨çš„Githubè´¦å·åç§°**)ï¼Œæ–¹ä¾¿æ·»åŠ åˆ°èµåŠ©åˆ—è¡¨ä¸­ã€‚

### å¼€æºè®¸å¯è¯

è¯¥é¡¹ç›®é‡‡ç”¨[Apache 2.0](https://github.com/RapidAI/TableStructureRec/blob/c41bbd23898cb27a957ed962b0ffee3c74dfeff1/LICENSE)
å¼€æºè®¸å¯è¯ã€‚
